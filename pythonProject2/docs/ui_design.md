# UI 设计说明

## 1. 设计目标

为“机械零件同心度检测系统”开发一套直观、易用、符合工业操作习惯的可视化界面，实现以下目标：

- **操作简便**：减少用户学习成本，支持一键检测。
- **信息完整**：清晰展示检测流程、实时结果与历史数据。
- **交互友好**：提供参数调节、图像预览、结果导出等便捷功能。
- **适配工业场景**：界面布局合理，支持快速批量检测。

---

## 2. 界面整体布局

采用经典的三栏式布局，分为：

| 区域          | 位置   | 内容说明                          |
|---------------|--------|-----------------------------------|
| **左侧面板**  | 左侧   | 图像显示区、相机控制、图像导入导出 |
| **中间面板**  | 中间   | 参数设置、实时预览、检测过程动画    |
| **右侧面板**  | 右侧   | 检测结果展示、历史记录、报告导出    |

---

## 3. 各功能模块说明

### 3.1 主窗口 (`main_window.py`)
- 采用 `QMainWindow` 作为主框架，包含菜单栏、工具栏、状态栏。
- 菜单栏：文件（打开、保存、退出）、视图（窗口布局）、帮助（使用说明）。
- 工具栏：常用功能按钮（开始检测、停止检测、导出报告）。
- 状态栏：显示当前系统状态（如“就绪”、“检测中”、“已完成”）。

### 3.2 图像显示控件 (`camera_viewer.py`)
- 使用 `QLabel` 或 `QGraphicsView` 显示实时图像或加载的图像。
- 支持图像缩放、平移、复位视图。
- 检测时自动绘制圆心标记、偏差箭头、同心度标注。

### 3.3 参数设置面板 (`parameter_panel.py`)
- 分组布局，包括：
  - **图像预处理参数**：
    - 滤波类型（中值/高斯）
    - 滤波核大小
    - 光照补偿开关
    - 边缘检测阈值
  - **圆心检测参数**：
    - 霍夫变换参数（半径范围、累加器阈值）
    - 最小二乘拟合选项
  - **相机/标定参数**：
    - 相机分辨率
    - 标定文件路径
    - 畸变矫正开关

- 提供“保存参数”、“载入参数”、“恢复默认”按钮。

### 3.4 结果显示面板 (`result_viewer.py`)
- 表格形式展示检测结果：
  | 序号 | 内孔圆心坐标 | 外圆圆心坐标 | 偏心距(mm) | 同心度(‰) | 是否合格 |
  |------|--------------|--------------|------------|-----------|----------|
- 实时绘制同心度变化曲线（`Matplotlib` 嵌入）。
- 显示统计信息（检测总数、合格数、合格率、平均耗时）。

### 3.5 报告导出模块 (`report_generator.py`)
- 支持导出为 **Excel** 或 **PDF** 格式。
- 报告内容包含：
  - 检测时间、操作员
  - 检测参数摘要
  - 结果表格
  - 统计图表（同心度分布图）
  - 结论与建议

---

## 4. 交互流程示例

### 4.1 单次检测流程
1. 用户点击“打开图像”或“启动相机”。
2. 图像显示在左侧区域。
3. 在中间面板设置算法参数（或使用默认值）。
4. 点击“开始检测”。
5. 右侧面板实时显示圆心坐标、偏心距、同心度。
6. 检测完成后可点击“导出报告”。

### 4.2 批量检测流程
1. 设置参数并保存。
2. 选择“批量模式”，导入多张图像或连续采集。
3. 系统自动依次检测，结果汇总至右侧表格。
4. 批量导出报告。

---

## 5. 界面风格与控件

- **风格**：采用 Qt 默认风格，简洁清晰，符合工业软件审美。
- **字体**：使用系统默认字体，重点信息可加粗或变色（如不合格标红）。
- **图标**：使用简洁图标表示常用操作（如播放、停止、保存）。
- **响应式布局**：支持窗口缩放，控件自适应调整。

---

## 6. 技术实现要点

- 使用 **PyQt5** 作为 GUI 开发框架。
- 使用 `QThread` 实现图像采集与检测算法的异步执行，避免界面卡顿。
- 使用 `QTimer` 实现实时图像刷新。
- 使用 `QTableWidget` 和 `QChart`（或 `Matplotlib`）展示数据与图表。
- 配置文件使用 YAML 格式，便于参数持久化与载入。

---

## 7. 测试与验证

- 在不同分辨率屏幕下测试布局适应性。
- 模拟用户操作流程，确保界面响应流畅。
- 与实际检测算法联调，验证数据显示与交互逻辑正确性。

---

## 8. 备注

本界面设计旨在满足本科毕业设计的功能需求与演示要求，注重实用性与可展示性，便于答辩时演示系统完整工作流程。
